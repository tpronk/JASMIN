<html>
    <head>
        <link rel="stylesheet" type="text/css" href="jsoneditor/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="jsoneditor/bootstrap-theme.min.css" />
        <script src="jsoneditor/bootstrap.min.js"></script>
        <script src="jsoneditor/jsoneditor.min.js"></script>
<script>
// Set default options
JSONEditor.defaults.options.theme = 'bootstrap3';
//JSONEditor.defaults.options.iconlib = 'fontawesome4';

// Setup schema
var schema = {
    "title": " ",
    "type" : "object",
    "properties" : {
        "TaskSpritesJSON" : {
            "type": "array",
            "format": "table",
            "items": {
                "type": "object",
                "default" : {
                    "key"   : "key_in_sprites",
                    "type"  : "<div>",
                    "attr"  : [ { "p" : "id", "v" : "domId" } ],
                    "css"   : [ 
                        { "p" : "background-color", "v" : "#000000" },
                        { "p" : "z-index",          "v" : 1 }
                    ],
                    "scale" : [ 
                        { "p" : "left",   "v" :  .2 }, 
                        { "p" : "top",    "v" :  .2 }, 
                        { "p" : "width",  "v" : 1.2 }, 
                        { "p" : "height", "v" :  .6 }
                    ]
                },
                "properties": {
                    "key": { 
                        "type"   : "string"
                    },
                    "type": {
                        "type"    : "string"
                    },
                    "attr": {
                        "type"    : "array",
                        "format"  : "table",
                        "items": {
                            "type"       : "object",
                            "properties" : {
                                "p": {
                                    "title"   : "property",
                                    "type"    : "string"
                                },                  
                                "v": {
                                    "title"   : "value",                            
                                    "type"    : "string"
                                }
                            }
                        }
                    },
                    "css": {
                        "type"    : "array",
                        "format"  : "table",
                        "items": {
                            "type"       : "object",
                            "properties" : {
                                "p": {
                                    "title"   : "property",                            
                                    "type"    : "string"
                                },                  
                                "v": {
                                    "title"   : "value",                                                        
                                    "type"    : "string"
                                }
                            }
                        }
                    },              
                    "scale": {
                        "type"    : "array",
                        "format"  : "table",
                        "items": {
                            "type"       : "object",
                            "properties" : {
                                "p": {
                                    "title"   : "property",                            
                                    "type"    : "string"
                                },                  
                                "v": {
                                    "title"   : "value",                                                        
                                    "type"    : "number"
                                }
                            }
                        }
                    }
                }    
            }
        }
    }
};

schema[ "properties" ][ "TaskSpritesJSON" ][ "default" ] = [  
    {
        "key"   : "background",
        "type"  : "<div>",
        "attr"  : [],
        "css"   : [ 
            { "p" : "background-color", "v" : "#000000" },
            { "p" : "z-index",          "v" : 1 }
        ],
        "scale" : [ 
            { "p" : "left",      "v" :  .2  }, 
            { "p" : "top",       "v" :  .2  }, 
            { "p" : "width",     "v" : 1.2  }, 
            { "p" : "height",    "v" :  .6  }
        ]
    },
    {
        "key"   : "stimulus_container",
        "type"  : "<div>",
        "attr"  : [ { "p" : "id", "v" : "stimulus_container" } ],
        "css"   : [ 
            { "p" : "z-index",          "v" : 2 },
            { "p" : "display",          "v" : "table" },
            { "p" : "text-align",       "v" : "center" },
            { "p" : "background-color", "v" : "#555555" }
        ],
        "scale" : [ 
            { "p" : "left",      "v" :  .3  }, 
            { "p" : "top",       "v" :   0  }, 
            { "p" : "width",     "v" : 1.0  }, 
            { "p" : "height",    "v" : 1.0  },
            { "p" : "font-size", "v" :  .05 },
        ]
    },
    {
        "key"   : "button_left",
        "type"  : "<div>",
        "attr"  : [ { "p" : "id", "v" : "stimulus_container" } ],
        "css"   : [ 
            { "p" : "z-index",          "v" : 3 },
            { "p" : "display",          "v" : "table" },
            { "p" : "text-align",       "v" : "center" },
            { "p" : "background-color", "v" : "#999999" }
        ],
        "scale" : [ 
            { "p" : "left",      "v" :   0  }, 
            { "p" : "top",       "v" :   0  }, 
            { "p" : "width",     "v" :  .3  }, 
            { "p" : "height",    "v" : 1.0  },
            { "p" : "font-size", "v" :  .05 }
        ]
    },
    {
        "key"   : "button_right",
        "type"  : "<div>",
        "attr"  : [ { "p" : "id", "v" : "stimulus_container" } ],
        "css"   : [ 
            { "p" : "z-index",          "v" : 3 },
            { "p" : "display",          "v" : "table" },
            { "p" : "text-align",       "v" : "center" },
            { "p" : "background-color", "v" : "#999999" }
        ],
        "scale" : [ 
            { "p" : "left",      "v" : 1.3  }, 
            { "p" : "top",       "v" :   0  }, 
            { "p" : "width",     "v" :  .3  }, 
            { "p" : "height",    "v" : 1.0  },
            { "p" : "font-size", "v" :  .05 }
        ]
    }        
];

    
     
// Initialize the editor
window.onload = function() { 
    editor = new JSONEditor(
        document.getElementById("editor_holder"),
        {
            schema:  schema,
            disable_array_reorder: true,
            disable_properties: true,
            disable_collapse: true
        }
    );
};

startCanvas = function()
{
    var config = editor.getValue();
    window.location = "runCanvas.html?sprites=" +  encodeURIComponent( JSON.stringify( config ) );
};

</script>
<script type="text/javascript" src="../../trunk/www/static/js/plugins/jquery.js"></script>
    </head>
    <body>
        <button id="submit" onclick="startCanvas();" style="background-color:#CCCCFF;">Start Canvas</button>
        <div id="editor_holder"></div>
    </body>
</html>

