<html>
    <head>
        <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="bootstrap-theme.min.css" />
        <link rel="stylesheet" type="text/css" href="font-awesome.min.css" />
        <script src="bootstrap.min.js"></script>
        <script src="jsoneditor.min.js"></script>
<script>
// Set default options
JSONEditor.defaults.options.theme = 'bootstrap3';
//JSONEditor.defaults.options.iconlib = 'fontawesome4';

// Setup schema
var schema = {
    title: "AAT Config",
    type: "object",
    properties: {
        graphics_url: {
            type: "string",
            default: "graphics/"
        },
        stimuli_url: {
            type: "string",
            description: "Path to stimuli",
            default: "stimuli/alcohol_italy/"
        },
        stimuli_extension: {
            type: "string",
            default: ".jpg"            
        },
        aat_approach: {
            type: "string",
            default: "right"            
        },        
        aat_parts: {
            type: "array",
            format: "table",
            title: "aat_parts",
            items: {
                type: "object",
                title: "part",
                properties: {
                    type: {
                        type: "string",
                        default: "practice"
                    },
                    placebo: {
                        type: "boolean"
                    },
                    reps: {
                        type: "integer"
                    },
                    stimuli: {
                        type: "array",
                        format: "table",
                        title: "stimuli",
                        items: {
                            type: "string",
                            title: " "
                        }
                    },
                    blocks: {
                        type: "array",
                        format: "table",
                        title: "blocks",
                        items: {
                            type: "array",
                            format: "table",
                            title: "block",
                            items: {
                                type: "string",
                                title: "slide"
                            }
                        }
                    }                    
                }
            },
            default: [
                {
                    type: "practice",
                    placebo: true,
                    reps: 2,
                    stimuli: [
                        "practice"
                    ],
                    blocks: [ [
                        "#[gaat_task_intro_slide_1]",
                        "#[gaat_task_intro_slide_2]"
                    ] ]
                },
                {
                    type: "assess",
                    placebo: true,
                    reps: 2,
                    stimuli: [
                        "a1", "p1"
                    ],
                    blocks: [ [
                        "#[task_block_intro]"
                    ] ]
                },
                {
                    type: "train",
                    placebo: false,
                    reps: 4,
                    stimuli: [
                        "a2", "p2", "a3", "p3"
                    ],
                    blocks: [ 
                        [ "#[task_block_intro]" ],
                        [ "#[task_block_intro]" ]
                    ]
                },
                {   
                    "type"    : "done",
                    "placebo" : true,
                    "reps"    : 1,                         
                    "stimuli" : [ 
                    ],            
                    "blocks"  : [                          
                        [ 
                            "#[all_done]"
                        ]
                    ]
                }                
            ]
        }
    }
};    

// Initialize the editor
window.onload = function() { 
    editor = new JSONEditor(
        document.getElementById("editor_holder"),
        {
            schema: schema
        }
    );
};

startVPT = function()
{
    var config = editor.getValue();
    config[ "task" ] = "aat";
    //alert( encodeURI( JSON.stringify( config ) ) );
    window.location = "run.html?config=" +  encodeURIComponent( JSON.stringify( config ) );
    
};

</script>
<script type="text/javascript" src="../../trunk/www/static/js/plugins/jquery.js"></script>
    </head>
    <body>
        <button id="submit" onclick="startVPT();" style="background-color:#CCCCFF;">Start AAT</button>
        <div id="editor_holder"></div>
    </body>
</html>

